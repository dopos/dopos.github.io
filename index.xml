<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>dopos on DoPoS</title><link>http://dopos.github.io/</link><description>Recent content in dopos on DoPoS</description><generator>Hugo -- gohugo.io</generator><language>ru</language><copyright>&amp;copy;{year}, All Rights Reserved</copyright><lastBuildDate>Sat, 11 Jan 2020 14:09:21 +0900</lastBuildDate><atom:link href="http://dopos.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>November 2020</title><link>http://dopos.github.io/updates/2020_november/</link><pubDate>Fri, 11 Aug 2017 00:10:37 +0900</pubDate><guid>http://dopos.github.io/updates/2020_november/</guid><description>Github: dcape
Release: v1.1, Two years in production</description></item><item><title>September 2018</title><link>http://dopos.github.io/updates/2018_september/</link><pubDate>Fri, 11 Aug 2017 00:10:37 +0900</pubDate><guid>http://dopos.github.io/updates/2018_september/</guid><description>v1.0.0-rc2 (2018-09-23) Github: dcape
Release: v1.0.0-rc2, Use apisite
Изменено apps/enfist: вместо pgrpc теперь используется apisite Установка обновления git pull mv .env .env.bak make init make enfist-apply make up</description></item><item><title>October 2017</title><link>http://dopos.github.io/updates/2017_october/</link><pubDate>Fri, 11 Aug 2017 00:10:37 +0900</pubDate><guid>http://dopos.github.io/updates/2017_october/</guid><description>v1.0.0-rc1 Date: 2017-10-22
Github: dcape
Release: v1.0.0-rc1, Ready to use
Изменено apps/traefik*: в настройки вынесен редирект 80 -&amp;gt; 443 apps/traefik теперь не совместим по конфигу с apps/traefik-acme, при переключении необходим make init v0.10 Date: 2017-10-19
Изменено apps/cis: добавлено создание каталогов var/apps, var/log в cis-apply apps/cis: изменена версия webtail (0.12) apps/enfist: исправлено обновление sql-пакетов enfist,rpc и их текущие версии Добавлено Файл CHANGELOG.md README.md: информация о зависимости (gawk), уточнен блок &amp;ldquo;Быстрый старт&amp;rdquo; DEPLOY.</description></item><item><title>August 2017</title><link>http://dopos.github.io/updates/2017_august/</link><pubDate>Fri, 11 Aug 2017 00:10:37 +0900</pubDate><guid>http://dopos.github.io/updates/2017_august/</guid><description>Github: dcape
Commit: v0.1, code working in general</description></item><item><title>February 2015</title><link>http://dopos.github.io/updates/2015_february/</link><pubDate>Tue, 28 Jan 2020 00:10:37 +0900</pubDate><guid>http://dopos.github.io/updates/2015_february/</guid><description>Github: fidm
Commit: init</description></item><item><title>November 2014</title><link>http://dopos.github.io/updates/2014_november/</link><pubDate>Wed, 12 Nov 2014 00:00:00 +0000</pubDate><guid>http://dopos.github.io/updates/2014_november/</guid><description>Github: consup
Commit: init</description></item><item><title>traefik</title><link>http://dopos.github.io/dcape/apps/traefik/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/traefik/</guid><description>Конфигурация traefik Использование TLS Dcape поддерживает протокол TLS с использованием ключей Let&amp;rsquo;s Encrypt.
При инициализации Dcape, поддержку TLS можно сконфигурировать четырьмя способами:
local mode - локальная установка, использование DCAPE на локальном компьютере без поддержки TLS. dev mode - установка с использованием TLS с отдельным сертификатом для каждого приложения, использование которых настраивается конкретно для приложения при его развертывании. По умолчанию включено для встроенных приложений dcape (cis, portainer, gitea). В этом режиме используется переменная REDIR_ENTRY, которой устанавливается редирект на https отдельно для каждого приложения.</description></item><item><title>Setup</title><link>http://dopos.github.io/dcape/deploy/setup/</link><pubDate>Tue, 28 Jan 2020 00:36:14 +0900</pubDate><guid>http://dopos.github.io/dcape/deploy/setup/</guid><description>Для развертывания приложений в среде dcape v2 используется drone c образом docker-compose (создается при установке dcape).
См. также Deploy with Drone Адаптированные для dcape приложения dcape-config-cli - утилита для работы (загрузки,выгрузки, изменения) с конфигурациями запуска в среде dcape Актуальный список адаптированных приложений dcape Управление конфигурациями запуска приложений Конфигурация запуска любого приложения dcape - текстовый файл .env, который создается командой make .env.
Этот файл используется make start-hook для разворачивания приложения и docker-compose для управления контейнерами приложения.</description></item><item><title>Targets</title><link>http://dopos.github.io/dcape/intro/targets/</link><pubDate>Tue, 28 Jan 2020 00:34:51 +0900</pubDate><guid>http://dopos.github.io/dcape/intro/targets/</guid><description>Зачем это нужно Развертывание dcape имеет результатом 2 файла - docker-compose.yml и .env, которые позволяют командой make up запустить весь стек выбранных для конкретного сервера приложений. Все эти приложения доступны на dockerhub и все нужное для их запуска командой docker-compose up может быть подготовлено вручную, однако dcape добавляет в процесс подготовки такого решения следующие преимущества:
файл параметров (.env) формируется программно, что позволяет использовать в значениях переменные генерировать необходимые приложениям пароли и токены формировать взаимосвязанные настройки приложений файл конфигурации контейнеров (docker-compose.</description></item><item><title>PostgreSQL</title><link>http://dopos.github.io/dcape/apps/postgresql/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/postgresql/</guid><description/></item><item><title>Basic Usage</title><link>http://dopos.github.io/dcape/intro/basicusage/</link><pubDate>Tue, 28 Jan 2020 00:34:51 +0900</pubDate><guid>http://dopos.github.io/dcape/intro/basicusage/</guid><description>Markdown here</description></item><item><title>Quick Start</title><link>http://dopos.github.io/dcape/gettingstarted/quickstart/</link><pubDate>Tue, 28 Jan 2020 00:34:41 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/quickstart/</guid><description>Интернет-сервер без gitea Вариант c поддержкой wildcard-сертификатов SSL, при котором gitea установлена на другом сервере (в примере - it.domain.tld) и уже создан TOKEN. Настройка и запуск могут быть выполнены одной командой:
1 2 3 4 5 6 7 make install ACME=wild DNS=wild DCAPE_DOMAIN=srv1.domain.tld \ TRAEFIK_ACME_EMAIL=admin@domain.tld \ NARRA_GITEA_ORG=dcape \ DRONE_ADMIN=lekovr \ PDNS_LISTEN=192.168.23.10:53 \ GITEA=https://it.domain.tld \ TOKEN=**token_from_gitea** В PDNS_LISTEN порт изменен на стандартный (по умолчанию: 54) и задан ip, чтобы не возникало конфликта с локальным резолвером.</description></item><item><title>Deps</title><link>http://dopos.github.io/dcape/gettingstarted/dependencies/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/dependencies/</guid><description>Зависимости linux 64bit с git, make, sed, curl, jq (тестируем на Ubuntu) docker docker-compose используется в dcape в формате docker-образа, поэтому отдельной установки не требует.
Пример установки зависимостей:
1 2 3 4 5 6 7 8 9 # docker # см https://docs.docker.com/engine/install/ubuntu/ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository &amp;#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs)stable&amp;#34; sudo apt install docker-ce docker-ce-cli containerd.io sudo usermod -a -G docker $USER # make git sed curl jq sudo apt install make git sed curl jq</description></item><item><title>gitea</title><link>http://dopos.github.io/dcape/apps/gitea/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/gitea/</guid><description/></item><item><title>DNS setup</title><link>http://dopos.github.io/dcape/gettingstarted/dns/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/dns/</guid><description>DNS Т.к. dcape разворачивает несколько независимых сервисов, их имена должны быть прописаны в DNS. Предпочтительным является вариант регистрации wildcard domain, но можно и регистрировать индивидуально.
Пример имен для сервера srv1.domain.tld:
srv1.domain.tld - для фронтендов narra, enfist, traefik git.srv1.domain.tld - для gitea drone.srv1.domain.tld - для drone port.srv1.domain.tld - для portainer ns.srv1.domain.tld - для powerdns См. также: DNS setup
/etc/hosts, для локального использования 1 2 3 4 5 6 7 8 9 10 11 grep -q git.</description></item><item><title>Installation</title><link>http://dopos.github.io/dcape/gettingstarted/installation/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/installation/</guid><description>Исходники Рекомендуемым способом копирования файлов на сервер является выполнение git clone. Это позволяет в будущем
обновить исходники для получения информации о проверенных новых версиях используемых приложений увидеть локальные изменения исходников, если их понадобится сделать 1 2 3 4 cd /opt sudo mkdir dcape &amp;amp;&amp;amp; sudo chown $USER dcape git clone -b v2 --single-branch --depth 1 https://github.com/dopos/dcape.git cd dcape Настройка и запуск Локальный сервер Вариант без поддержки SSL, но с установкой gitea.</description></item><item><title>drone</title><link>http://dopos.github.io/dcape/apps/drone/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/drone/</guid><description>Deploy with Drone Как это работает Приложения (собственные исходные тексты или файлы конфигурации стороннего ПО) размещаются в репозитории на github.com или аналогичном сервисе (может использоваться встроенное приложение gitea, или собственный аналогичный сервис).
Для поддержки среды dcape репозиторий должен содержать файлы:
docker-compose.yml - конфигурация сервисов docker, используемых для сборки и запуска приложений Makefile с командами создания файла конфигурации запуска .env, подготовки окружения приложения (БД и прочее), запуском сервисов через docker-compose Разворачивание приложения производится командой make start-hook, которая путем исполнения целей из Makefile, подготавливает запуск приложения, финальной целью является запуск docker-compose с использованием переменных конфигурации запуска из файла .</description></item><item><title>Configuration</title><link>http://dopos.github.io/dcape/gettingstarted/configuration/</link><pubDate>Tue, 28 Jan 2020 00:34:56 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/configuration/</guid><description>Аргументы make init Благодаря использованию Makefile, любой параметр dcape может быть задан в аргументах команды make init, после выполнения которой полный список переменных с их описанием и значениями доступен в файле с именем .env (или именем, заданном в параметре CFG).
Следующие параметры имеют ключевое значение для конфигурации dcape:
DCAPE_TAG
Идентификатор стека приложений, позволяющий изолировать его от других контейнеров docker (в т.ч. и от другой копии стека dcape если такая будет запущена на том же сервере) Префикс контейнеров стека (значение используется как COMPOSE_PROJECT_NAME) DCAPE_DOMAIN</description></item><item><title>enfist</title><link>http://dopos.github.io/dcape/apps/enfist/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/enfist/</guid><description/></item><item><title>narra</title><link>http://dopos.github.io/dcape/apps/narra/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/narra/</guid><description/></item><item><title>powerdns</title><link>http://dopos.github.io/dcape/apps/powerdns/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/powerdns/</guid><description/></item><item><title>Portainer</title><link>http://dopos.github.io/dcape/apps/portainer/</link><pubDate>Thu, 30 Jan 2020 00:38:25 +0900</pubDate><guid>http://dopos.github.io/dcape/apps/portainer/</guid><description/></item><item><title>App config</title><link>http://dopos.github.io/dcape/deploy/config/</link><pubDate>Tue, 28 Jan 2020 00:36:14 +0900</pubDate><guid>http://dopos.github.io/dcape/deploy/config/</guid><description>Markdown here</description></item><item><title>External app</title><link>http://dopos.github.io/dcape/deploy/external/</link><pubDate>Tue, 28 Jan 2020 00:36:14 +0900</pubDate><guid>http://dopos.github.io/dcape/deploy/external/</guid><description>Markdown here</description></item><item><title>Own</title><link>http://dopos.github.io/dcape/deploy/own/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0000</pubDate><guid>http://dopos.github.io/dcape/deploy/own/</guid><description>&lt;p>This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.&lt;/p></description></item></channel></rss>