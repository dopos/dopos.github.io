---
title: "Targets"
description: "The purpose of the project"
date: 2020-01-28T00:34:51+09:00
draft: false
weight: 1
---

## Зачем это нужно

Развертывание **dcape** имеет результатом 2 файла - `docker-compose.yml` и `.env`, которые позволяют командой `make up` запустить весь стек выбранных для конкретного сервера приложений. Все эти приложения доступны на [dockerhub](https://hub.docker.com/) и все нужное для их запуска командой `docker-compose up` может быть подготовлено вручную, однако **dcape** добавляет в процесс подготовки такого решения следующие преимущества:

* файл параметров (`.env`) формируется программно, что позволяет
    * использовать в значениях переменные
    * генерировать необходимые приложениям пароли и токены
    * формировать взаимосвязанные настройки приложений
* файл конфигурации контейнеров (`docker-compose.yml`) формируется программно, что позволяет параметризовать список приложений для каждой инсталляции, в частности
    * если разворачивается группа серверов различного назначения, gitea достаточно развернуть только на одном из них, а на остальных вместо `make init` выполнять `make init GITEA=https://git.domain.tld`
    * если для сервера не нужен SSL (например, в локальной сети), не указывать параметр `ACME`
    * если для сервера не нужен DNS (например, wildcard сертификаты не используются или их поддержка не использует локальный DNS), не указывать параметр `DNS`
* использование `make` позволяет перед стартом приложения выполнять его инициализацию, включая
    * создание БД (и, при необходимости, загрузку дампа БД)
    * формирование файлов конфигураций по шаблонам
    * регистрацию OAuth2 приложений
