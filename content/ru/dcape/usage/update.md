---
title: "Обновление"
description: "Обновление dcape и версий базовых приложений"
date: 2020-01-28T00:39:06+09:00
weight: 2
draft: false
---

Если dcape был установлен командой `git clone`, для его обновления используется команда `git pull`, после выполнения которой необходимо обновить файл `.env`

## Обновление файла .env

При обновлении проекта возможно появление новых переменных в `.env` файле.
Алгоритм обновления .env с сохранением старых настроек:

```bash
mv .env .env.bak
make init
```

Другой вариант:

```bash
mv .env .env.1019
make init CFG_BAK=.env.1019
```

Все совпадающие значения будут взяты из `.env.bak` (т.е. из старого конфига).
Если изменятся номера версий используемых docker-образов базовых приложений, будут выведены предупреждения.

## Обновление версий базовых приложений

Для того, чтобы обновить все номера версий используемых docker-образов базовых приложений, сохранив остальные настройки, надо подготовить `.env.bak`, убрав из него номера версий:

```bash
grep -v "_VER=" .env > .env.bak
mv .env .env.pre
make init
```

## Резервирование .env в enfist

Настройки `dcape/.env` не сохраняются в **enfist** автоматически, но это можно сделать вручную:

```bash
ln -s .env dcape.env
make env-set TAG=dcape
```
