---
title: "postgresql"
date: 2020-01-30T00:38:25+09:00
description: хранение конфигураций всех приложений и размещение баз данных приложений, которым требуется СУБД
draft: false
weight: 2
---

 Приложение |  [postgresql](https://www.postgresql.org)
 -- | --
 Docker | [postgres](https://hub.docker.com/_/postgres)
 Назначение | хранение конфигураций всех приложений и размещение баз данных приложений, которым требуется СУБД

## Назначение

СУБД postgresql используется следующими сервисами dcape:

* gitea
* drone
* enfist
* powerdns

Кроме этого, контейнер доступен для других приложений, развертываемых под dcape.

## Особенности

### Размещение файлов

Постоянные данные контейнера размещаются в каталоге `var/db` в следующих подкаталогах:

* `data` - внутренние файлы postgresql
* `init` - скрипты, которые выполняются при старте контейнера
* `backup` - размещение дампов баз для импорта/экспорта
* `conf.d` - каталог дополнений в конфигурацию, активируется вручную параметром `include_dir` файла `postgresql.conf`
* `shared` - каталог для размещения расширений перед их ручной активацией

### Резервные копии

Для резервного копирования баз данных используется приложение [pg-backup](https://github.com/dopos/dcape-app-pg-backup) которое по заданному в настройках расписанию делает дампы указанных в настройках баз и размещает их в формате `.tgz` в каталоге `var/db/backup`
