---
title: "Конфигурация"
description: "Параметры конфигурации"
date: 2020-01-28T00:34:56+09:00
draft: false
weight: 5
---

## Аргументы 'make init'

Благодаря использованию `Makefile`, любой параметр **dcape** может быть задан в аргументах команды `make init`, после выполнения которой полный список переменных с их описанием и значениями доступен в файле с именем `.env` (или именем, заданном в параметре `CFG`).

Следующие параметры имеют ключевое значение для конфигурации **dcape**:

### `DCAPE_TAG`

* Идентификатор стека приложений, позволяющий изолировать его от других контейнеров docker (в т.ч. и от другой копии стека **dcape** если такая будет запущена на том же сервере)
* Префикс контейнеров стека (значение используется как `COMPOSE_PROJECT_NAME`)

### `DCAPE_DOMAIN`

* hostname для базовых приложений (narra, enfist, traefik)
* суффикс по умолчанию для hostname остальных приложений стека

### `GITEA`

* значения: `[yes]|<URL>`
* `yes` - добавить в конфигурацию локальный сервер gitea
* `<URL>` - адрес внешнего сервера gitea

### `DNS`

* значения: `[no]|yes|wild`
* добавить в конфигурацию локальный сервер powerdns
* `wild` - настроить зону для поддержки wildcard сертификатов letsencrypt

### `ACME`

* значения: `[no]|http|wild`
* включить поддержку сертификатов letsencrypt
* `no` - адреса сервисов **dcape** будут начинаться с `http://`, иначе - `https://`
* `wild` - в конфигурацию traefik будет добавлена поддержка сертификатов для домена `*.DCAPE_DOMAIN`

### `NARRA_GITEA_ORG`

* username организации gitea, участникам которой будет предоставлен доступ к приватным ресурсам

### DRONE_ADMIN

* username пользователя gitea, который получит права администратора в drone

## См. также

* Файл конфигурации traefik для сертификатов [только HTTP-01](/apps/traefik/traefik.acme-http.yml) и [HTTP-01 + DNS-01](/apps/traefik/traefik.acme.yml)

При выполнении команды `make apply` соответствующий файл конфигурации traefik копируется в `var/traefik/traefik.yml` с заменой переменных.

Если файл `var/traefik/traefik.yml` уже существует, команды `make` не производит в нем никаких изменений.

