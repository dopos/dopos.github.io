<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Getting Started on DoPoS</title><link>http://dopos.github.io/en/dcape/gettingstarted/</link><description>Recent content in Getting Started on DoPoS</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy;{year}, All Rights Reserved</copyright><lastBuildDate>Tue, 28 Jan 2020 00:34:39 +0900</lastBuildDate><atom:link href="http://dopos.github.io/en/dcape/gettingstarted/index.xml" rel="self" type="application/rss+xml"/><item><title>Quick Start</title><link>http://dopos.github.io/en/dcape/gettingstarted/quickstart/</link><pubDate>Tue, 28 Jan 2020 00:34:41 +0900</pubDate><guid>http://dopos.github.io/en/dcape/gettingstarted/quickstart/</guid><description>Интернет-сервер без gitea Вариант c поддержкой wildcard-сертификатов SSL, при котором gitea установлена на другом сервере (в примере - it.domain.tld) и уже создан TOKEN. Настройка и запуск могут быть выполнены одной командой:
1 2 3 4 5 6 7 make install ACME=wild DNS=wild DCAPE_DOMAIN=srv1.domain.tld \ TRAEFIK_ACME_EMAIL=admin@domain.tld \ NARRA_GITEA_ORG=dcape \ DRONE_ADMIN=lekovr \ PDNS_LISTEN=192.168.23.10:53 \ GITEA=https://it.domain.tld \ TOKEN=**token_from_gitea** В PDNS_LISTEN порт изменен на стандартный (по умолчанию: 54) и задан ip, чтобы не возникало конфликта с локальным резолвером.</description></item><item><title>Deps</title><link>http://dopos.github.io/en/dcape/gettingstarted/dependencies/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/en/dcape/gettingstarted/dependencies/</guid><description>Зависимости linux 64bit с git, make, sed, curl, jq (тестируем на Ubuntu) docker docker-compose используется в dcape в формате docker-образа, поэтому отдельной установки не требует.
Пример установки зависимостей:
1 2 3 4 5 6 7 8 9 # docker # см https://docs.docker.com/engine/install/ubuntu/ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository &amp;#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs)stable&amp;#34; sudo apt install docker-ce docker-ce-cli containerd.io sudo usermod -a -G docker $USER # make git sed curl jq sudo apt install make git sed curl jq</description></item><item><title>DNS setup</title><link>http://dopos.github.io/en/dcape/gettingstarted/dns/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/en/dcape/gettingstarted/dns/</guid><description>DNS Т.к. dcape разворачивает несколько независимых сервисов, их имена должны быть прописаны в DNS. Предпочтительным является вариант регистрации wildcard domain, но можно и регистрировать индивидуально.
Пример имен для сервера srv1.domain.tld:
srv1.domain.tld - для фронтендов narra, enfist, traefik git.srv1.domain.tld - для gitea drone.srv1.domain.tld - для drone port.srv1.domain.tld - для portainer ns.srv1.domain.tld - для powerdns См. также: DNS setup
/etc/hosts, для локального использования 1 2 3 4 5 6 7 8 9 10 11 grep -q git.</description></item><item><title>Installation</title><link>http://dopos.github.io/en/dcape/gettingstarted/installation/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/en/dcape/gettingstarted/installation/</guid><description>Исходники Рекомендуемым способом копирования файлов на сервер является выполнение git clone. Это позволяет в будущем
обновить исходники для получения информации о проверенных новых версиях используемых приложений увидеть локальные изменения исходников, если их понадобится сделать 1 2 3 4 cd /opt sudo mkdir dcape &amp;amp;&amp;amp; sudo chown $USER dcape git clone -b v2 --single-branch --depth 1 https://github.com/dopos/dcape.git cd dcape Настройка и запуск Локальный сервер Вариант без поддержки SSL, но с установкой gitea.</description></item><item><title>Configuration</title><link>http://dopos.github.io/en/dcape/gettingstarted/configuration/</link><pubDate>Tue, 28 Jan 2020 00:34:56 +0900</pubDate><guid>http://dopos.github.io/en/dcape/gettingstarted/configuration/</guid><description>Аргументы make init Благодаря использованию Makefile, любой параметр dcape может быть задан в аргументах команды make init, после выполнения которой полный список переменных с их описанием и значениями доступен в файле с именем .env (или именем, заданном в параметре CFG).
Следующие параметры имеют ключевое значение для конфигурации dcape:
DCAPE_TAG
Идентификатор стека приложений, позволяющий изолировать его от других контейнеров docker (в т.ч. и от другой копии стека dcape если такая будет запущена на том же сервере) Префикс контейнеров стека (значение используется как COMPOSE_PROJECT_NAME) DCAPE_DOMAIN</description></item></channel></rss>