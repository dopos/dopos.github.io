<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Начало работы on DoPoS</title><link>http://dopos.github.io/dcape/gettingstarted/</link><description>Recent content in Начало работы on DoPoS</description><generator>Hugo -- gohugo.io</generator><language>ru</language><copyright>&amp;copy;{year}, All Rights Reserved</copyright><lastBuildDate>Tue, 28 Jan 2020 00:34:39 +0900</lastBuildDate><atom:link href="http://dopos.github.io/dcape/gettingstarted/index.xml" rel="self" type="application/rss+xml"/><item><title>Быстрый старт</title><link>http://dopos.github.io/dcape/gettingstarted/quickstart/</link><pubDate>Tue, 28 Jan 2020 00:34:41 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/quickstart/</guid><description>В случае, если уже
настроен DNS c поддержкой wildcard-сертификатов SSL есть сервер gitea (в примере - it.domain.tld) в gitea создан TOKEN на новом сервере установлены зависимости , установка dcape на этом новом сервере может быть произведена так:
1 2 3 4 5 6 7 8 9 git clone -b v2 --single-branch --depth 1 https://github.com/dopos/dcape.git cd dcape make install ACME=wild DNS=wild DCAPE_DOMAIN=srv1.domain.tld \ TRAEFIK_ACME_EMAIL=admin@domain.tld \ NARRA_GITEA_ORG=dcape \ DRONE_ADMIN=lekovr \ PDNS_LISTEN=192.</description></item><item><title>Зависимости</title><link>http://dopos.github.io/dcape/gettingstarted/dependencies/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/dependencies/</guid><description>Зависимости linux 64bit с git, make, sed, curl, jq (тестируем на Ubuntu) docker docker-compose используется в dcape в формате docker-образа, поэтому отдельной установки не требует.
Пример установки зависимостей:
1 2 3 4 5 6 7 8 9 # docker # см https://docs.docker.com/engine/install/ubuntu/ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository &amp;#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs)stable&amp;#34; sudo apt install docker-ce docker-ce-cli containerd.io sudo usermod -a -G docker $USER # make git sed curl jq sudo apt install make git sed curl jq</description></item><item><title>Настройка DNS</title><link>http://dopos.github.io/dcape/gettingstarted/dns/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/dns/</guid><description>DNS Т.к. dcape разворачивает несколько независимых сервисов, их имена должны быть прописаны в DNS. Предпочтительным является вариант регистрации wildcard domain, но можно и регистрировать индивидуально.
Пример имен для сервера srv1.domain.tld:
srv1.domain.tld - для фронтендов narra, enfist, traefik git.srv1.domain.tld - для gitea drone.srv1.domain.tld - для drone port.srv1.domain.tld - для portainer ns.srv1.domain.tld - для powerdns /etc/hosts, для локального использования 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 grep -q git.</description></item><item><title>Установка</title><link>http://dopos.github.io/dcape/gettingstarted/installation/</link><pubDate>Tue, 28 Jan 2020 00:34:13 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/installation/</guid><description>Исходники Рекомендуемым способом копирования файлов на сервер является выполнение git clone. Это позволяет в будущем
обновить исходники для получения информации о проверенных новых версиях используемых приложений увидеть локальные изменения исходников, если их понадобится сделать 1 2 3 4 cd /opt sudo mkdir dcape &amp;amp;&amp;amp; sudo chown $USER dcape git clone -b v2 --single-branch --depth 1 https://github.com/dopos/dcape.git cd dcape Настройка и запуск Локальный сервер Вариант без поддержки SSL, но с установкой gitea.</description></item><item><title>Конфигурация</title><link>http://dopos.github.io/dcape/gettingstarted/configuration/</link><pubDate>Tue, 28 Jan 2020 00:34:56 +0900</pubDate><guid>http://dopos.github.io/dcape/gettingstarted/configuration/</guid><description>Аргументы &amp;lsquo;make init&amp;rsquo; Благодаря использованию Makefile, любой параметр dcape может быть задан в аргументах команды make init, после выполнения которой полный список переменных с их описанием и значениями доступен в файле с именем .env (или именем, заданном в параметре CFG).
Следующие параметры имеют ключевое значение для конфигурации dcape:
DCAPE_TAG Идентификатор стека приложений, позволяющий изолировать его от других контейнеров docker (в т.ч. и от другой копии стека dcape если такая будет запущена на том же сервере) Префикс контейнеров стека (значение используется как COMPOSE_PROJECT_NAME) DCAPE_DOMAIN hostname для базовых приложений (narra, enfist, traefik) суффикс по умолчанию для hostname остальных приложений стека GITEA значения: [yes]|&amp;lt;URL&amp;gt; yes - добавить в конфигурацию локальный сервер gitea &amp;lt;URL&amp;gt; - адрес внешнего сервера gitea DNS значения: [no]|yes|wild добавить в конфигурацию локальный сервер powerdns wild - настроить зону для поддержки wildcard сертификатов letsencrypt ACME значения: [no]|http|wild включить поддержку сертификатов letsencrypt no - адреса сервисов dcape будут начинаться с http://, иначе - https:// wild - в конфигурацию traefik будет добавлена поддержка сертификатов для домена *.</description></item></channel></rss>